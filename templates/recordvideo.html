<!DOCTYPE html>
<html lang="en" dir="ltr">

  <title>Record Video Page</title>
  <head>
    <link href="../static/main.css" rel="stylesheet">
  </head>
<body>

<div class="container">
  <form action="{{url_for('entry')}}" method="POST">
  <button class="button button2"  type="submit"> Start Pagina </button>
</form>
<!-- <form id="buttonid" method="POST" action="/">
  <input type="submit"  class="button button3" value="Video opnemen" name="Videoopnemen"/>
</form> -->
<h1> De opname is gestart </h1>
    <h2 id="demo"></h2>
</div>


<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
 <script>
 var socket = io.connect('http://' + document.domain + ':' + location.port);


 <!-- length of video is defined in t -->
 var t = 30
 console.log(t)
 document.addEventListener('DOMContentLoaded', function(){
     var x = setInterval(function() {
     var seconds = t;
     console.log(t);
     document.getElementById("demo").innerHTML ="De opname loopt nog <br>" + seconds + "<br> seconden ";
     if (t < 0) {
       console.log("time is up");
       window.location.href = "/stoprecord";
       clearInterval(x);
       document.getElementById("demo").innerHTML = "Momentje, je video wordt zo getoond";
       console.log("Wacht 10 seconden")
       window.setTimeout(function(){
       window.location.href = "/view";
        }
        , 10000);
    }
     t = t -1;
   }, 1000);
   });
   socket.on('connect', function(data) {
        console.log('connected');
   });
   socket.on('message', function(data) {
        console.log('iets')
        console.log(data);
   });

</script>


  </body>
</html>
